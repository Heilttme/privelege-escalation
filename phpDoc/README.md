# üõ°Ô∏è CTF: Docker RCE & Privilege Escalation

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ—Ç CTF-–ø—Ä–æ–µ–∫—Ç –∏–º–∏—Ç–∏—Ä—É–µ—Ç –∞—Ç–∞–∫—É –Ω–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker. –ò–≥—Ä–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å —É—è–∑–≤–∏–º–æ–≥–æ PHP-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø–æ–ª—É—á–∞–µ—Ç —É–¥–∞–ª—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø, –Ω–∞—Ö–æ–¥–∏—Ç SSH-—É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–µ—Ç –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Docker –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è root-–¥–æ—Å—Ç—É–ø–∞.

–ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `startup.sh`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–Ω–∏–º–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –ø–æ–º–æ—â—å—é `docker-compose`.

---

## üî• –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

### 1. üêò RCE (Remote Command Execution) —á–µ—Ä–µ–∑ PHP
**–ì–¥–µ:** `logs.php` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `filter` –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (`;`, `|`, `$(...)`).  
**–ü–æ—á–µ–º—É —É—è–∑–≤–∏–º–æ—Å—Ç—å –µ—Å—Ç—å:** –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º shell-–∫–æ–º–∞–Ω–¥—ã.  
**–ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `escapeshellarg()`, –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤–≤–æ–¥–∞, –ª–∏–±–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç `shell_exec` –≤–æ–æ–±—â–µ.

### 2. üìÇ –£—Ç–µ—á–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
**–ì–¥–µ:** –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/var/www` –Ω–∞—Ö–æ–¥—è—Ç—Å—è:
- `user.txt` ‚Äî —Ñ–ª–∞–≥ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
- `credentials.txt` ‚Äî –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è SSH
**–ü–æ—á–µ–º—É —É—è–∑–≤–∏–º–æ—Å—Ç—å –µ—Å—Ç—å:** —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `www-data`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è reverse shell.
**–ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è:** –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –∫—Ä–µ–¥—ã –≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø—Ä–∞–≤–∞.

### 3. üîê SSH-–¥–æ—Å—Ç—É–ø –ø–æ —É–∫—Ä–∞–¥–µ–Ω–Ω—ã–º —É—á—ë—Ç–Ω—ã–º –¥–∞–Ω–Ω—ã–º
**–ì–¥–µ:** –ò–≥—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –∏–∑ `credentials.txt` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É `ssh`.  
**–ü–æ—á–µ–º—É —É—è–∑–≤–∏–º–æ—Å—Ç—å –µ—Å—Ç—å:** —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.  
**–ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è:** –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ—Ä–µ–∑ –≤–µ–±.

### 4. üê≥ –ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏ —á–µ—Ä–µ–∑ Docker (Docker Breakout)
**–ì–¥–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `ctfplayer` –≤—Ö–æ–¥–∏—Ç –≤ –≥—Ä—É–ø–ø—É `docker` –∏ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
**–ü–æ—á–µ–º—É —É—è–∑–≤–∏–º–æ—Å—Ç—å –µ—Å—Ç—å:** –≥—Ä—É–ø–ø–∞ `docker` —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –∫ root.
**–ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è:**
- –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≥—Ä—É–ø–ø—É `docker`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥–º–µ–Ω—É —Å–æ–∫–µ—Ç–∞ –∏–ª–∏ `rootless Docker`
- –†–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é –∏ SELinux/AppArmor
